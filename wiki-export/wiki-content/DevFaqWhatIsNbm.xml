<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

--><mediawiki xmlns="http://www.mediawiki.org/xml/export-0.3/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="0.3" xml:lang="en" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.3/ http://www.mediawiki.org/xml/export-0.3.xsd">
  <siteinfo>
    <sitename>NetBeans Wiki</sitename>
    <base>http://wiki.netbeans.org/Main_Page</base>
    <generator>MediaWiki 1.15.1</generator>
    <case>first-letter</case>
    <namespaces>
      <namespace key="-2">Media</namespace>
      <namespace key="-1">Special</namespace>
      <namespace key="0"/>
      <namespace key="1">Talk</namespace>
      <namespace key="2">User</namespace>
      <namespace key="3">User talk</namespace>
      <namespace key="4">NetBeans Wiki</namespace>
      <namespace key="5">NetBeans Wiki talk</namespace>
      <namespace key="6">File</namespace>
      <namespace key="7">File talk</namespace>
      <namespace key="8">MediaWiki</namespace>
      <namespace key="9">MediaWiki talk</namespace>
      <namespace key="10">Template</namespace>
      <namespace key="11">Template talk</namespace>
      <namespace key="12">Help</namespace>
      <namespace key="13">Help talk</namespace>
      <namespace key="14">Category</namespace>
      <namespace key="15">Category talk</namespace>
    </namespaces>
  </siteinfo>
  <page>
    <title>DevFaqWhatIsNbm</title>
    <id>7513</id>
    <revision>
      <id>39995</id>
      <timestamp>2010-07-16T08:13:22Z</timestamp>
      <contributor>
        <username>Jtulach</username>
        <id>526</id>
      </contributor>
      <text xml:space="preserve">__NOTOC__
===What is an NBM?===

An NBM file is a NetBeans module packaged for delivery via the web.
The principal differences between it and a module JAR are:
* It is compressed
* It can contain more than one JAR file - modules can package any libraries or other files they use into their NBM
* It contains metadata NetBeans will use to display information about it in the update center, such as the manifest contents, the license, etc.
* NBMs may be signed for security purposes

NBM files are just ZIP files with a special extension,
which use the JDK's mechanism for signing JARs.
Unless you're doing something unusual, you will not need to worry about the contents of NBMs -
just let the standard Ant task for NBM creation take care of it for you.
For those interested in gory details, read on.

====Structure of an NBM====
Below is an example of the contents of one -
this is from the &lt;tt&gt;hexedit_integration&lt;/tt&gt; module in &lt;tt&gt;contrib&lt;/tt&gt;,
which packages up an external library as well:

;&lt;tt&gt;Info/info.xml&lt;/tt&gt;:Metadata - this file is generated by the standard NBM build target, so if you use NetBeans support for creating modules, you should not need to do anything special to create it.  This info is used by the IDE to figure out if a module the user is installing is newer or older, than an existing one, whether or not its dependencies can be satisfied, etc. 
;&lt;tt&gt;META-INF/MANIFEST.MF&lt;/tt&gt;:The manifest - usually nothing of interest here, it is just generated because NBMs are created the same way that JARs are. May point to a signature for the NBM.
;&lt;tt&gt;netbeans/....&lt;/tt&gt;:Contents to be unpacked to some cluster in the NetBeans installation (or the user directory).
;&lt;tt&gt;netbeans/config/Modules/org-netbeans-modules-hexeditor.xml&lt;/tt&gt;:The module XML file used at runtime to discover modules. Indicates whether the module is autoload, etc.
;&lt;tt&gt;netbeans/modules/org-netbeans-modules-hexeditor.jar&lt;/tt&gt;:The actual module JAR.
;&lt;tt&gt;netbeans/modules/ext/hexedit.jar&lt;/tt&gt;:A library this module uses and includes.

Since NetBeans 6.9 NBM files now supports pack200 compression and all jar files in NBMs becomes compressed and have ".pack.gz" appended to the name e.g. modules/org-netbeans-modules-hexeditor.jar.pack.gz. 

For more info about pack200 usage see [[DevFaqNBMPack200|DevFaqNBMPack200]].

====Runtime module XML metadata====
The &lt;tt&gt;org-netbeans-modules-hexeditor.xml&lt;/tt&gt; runtime metadata file looks like this:

&lt;source lang="xml"&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE module PUBLIC "-//NetBeans//DTD Module Status 1.0//EN"
                        "http://www.netbeans.org/dtds/module-status-1_0.dtd"&gt;
&lt;module name="org.netbeans.modules.hexeditor"&gt;
    &lt;param name="autoload"&gt;false&lt;/param&gt;
    &lt;param name="eager"&gt;false&lt;/param&gt;
    &lt;param name="enabled"&gt;true&lt;/param&gt;
    &lt;param name="jar"&gt;modules/org-netbeans-modules-hexeditor.jar&lt;/param&gt;
    &lt;param name="release"&gt;1&lt;/param&gt;

    &lt;param name="reloadable"&gt;false&lt;/param&gt;

    &lt;param name="specversion"&gt;1.0&lt;/param&gt;

&lt;/module&gt;

&lt;/source&gt;

====Module installation metadata - Info.xml====
The &lt;tt&gt;Info/Info.xml&lt;/tt&gt; file that NetBeans uses to figure out if it ''can'' install a module,
dependencies, etc.  looks like this
(it also contains the license that the user will agree to to install the module from the update center):

&lt;source lang="xml"&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE module PUBLIC "-//NetBeans//DTD Autoupdate Module Info 2.3//EN"
                        "http://www.netbeans.org/dtds/autoupdate-info-2_3.dtd"&gt;
&lt;module codenamebase="org.netbeans.modules.hexeditor"
        homepage="http://contrib.netbeans.org/"
        distribution="http://...../org-netbeans-modules-hexeditor.nbm"
        license="standard-nbm-license.txt"
        downloadsize="0"
        needsrestart="false"
        moduleauthor=""
        releasedate="2005/08/29"
&gt;
  &lt;manifest OpenIDE-Module="org.netbeans.modules.hexeditor/1"
            OpenIDE-Module-Display-Category="Infrastructure"
            OpenIDE-Module-Implementation-Version="050829"
            OpenIDE-Module-Long-Description="Sample module hexeditor providing HexEdit"
            OpenIDE-Module-Module-Dependencies="org.openide.filesystems &gt; 6.2, ..."
            OpenIDE-Module-Name="hexeditor"
            OpenIDE-Module-Requires="org.openide.modules.ModuleFormat1"
            OpenIDE-Module-Short-Description="Sample hexeditor module"
            OpenIDE-Module-Specification-Version="1.0"
  /&gt;
  &lt;license name="standard-nbm-license.txt"&gt;&lt;![CDATA[
                Sun Public License Notice
....
]]&gt;&lt;/license&gt;
&lt;/module&gt;
&lt;/source&gt;

----

Applies to: NetBeans 6.5 and above</text>
    </revision>
  </page>
</mediawiki>
